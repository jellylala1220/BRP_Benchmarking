# Ground Truthï¼ˆçœŸå®è¡Œç¨‹æ—¶é—´ï¼‰æ¥æºè¯´æ˜

## ğŸ“Š å½“å‰å®ç°æ–¹å¼

### æ–¹å¼1ï¼šé€šè¿‡è®¡ç®—å¾—å‡ºï¼ˆå½“å‰é»˜è®¤ï¼‰

åœ¨ `utils/data.py` çš„ `build_finaldata()` å‡½æ•°ä¸­ï¼š

```python
# ç¬¬560-562è¡Œ
df['v_avg_kmh'] = calculate_weighted_avg_speed(df)
link_length_km = link_length_m / 1000
df['fused_tt_15min'] = (link_length_km / df['v_avg_kmh']) * 3600
```

**å…¬å¼**: `T = (L / v) * 3600`
- `L`: è·¯æ®µé•¿åº¦ï¼ˆkmï¼‰
- `v`: å¹³å‡é€Ÿåº¦ï¼ˆkm/hï¼‰
- `T`: è¡Œç¨‹æ—¶é—´ï¼ˆç§’ï¼‰

**ä¼˜ç‚¹**:
- ç¡®ä¿æµé‡ã€é€Ÿåº¦å’Œè¡Œç¨‹æ—¶é—´åœ¨15åˆ†é’Ÿèšåˆçª—å£å†…çš„ä¸€è‡´æ€§
- ç¬¦åˆæŠ¥å‘Šä¸­çš„ Eq. 3.2
- ä¸ä¾èµ–å¤–éƒ¨æ•°æ®æº

**ç¼ºç‚¹**:
- å¦‚æœé€Ÿåº¦æ•°æ®æœ‰è¯¯å·®ï¼Œä¼šå½±å“ground truthçš„å‡†ç¡®æ€§

---

### æ–¹å¼2ï¼šç›´æ¥ä½¿ç”¨CSVæ–‡ä»¶ä¸­çš„"Fused Travel Time"ï¼ˆæ¨èï¼‰

åœ¨CSVæ–‡ä»¶ä¸­ï¼Œç¬¬19åˆ—æ˜¯ **"Fused Travel Time"**ï¼Œè¿™æ˜¯é€šè¿‡GPS/ä¼ æ„Ÿå™¨èåˆå¾—å‡ºçš„çœŸå®è¡Œç¨‹æ—¶é—´ã€‚

**ä¼˜ç‚¹**:
- æ›´å‡†ç¡®çš„çœŸå®å€¼ï¼ˆæ¥è‡ªå®é™…æµ‹é‡ï¼‰
- å¯èƒ½åŒ…å«äº¤é€šä¿¡å·ã€æ‹¥å µç­‰å®é™…å› ç´ 
- ä¸éœ€è¦ä¾èµ–é€Ÿåº¦è®¡ç®—

**ç¼ºç‚¹**:
- éœ€è¦ç¡®ä¿CSVæ–‡ä»¶å¯ç”¨
- éœ€è¦å¤„ç†æ•°æ®å¯¹é½é—®é¢˜

---

## ğŸ”§ å¦‚ä½•é€‰æ‹©Ground Truthæ¥æº

### é€‰é¡¹Aï¼šç»§ç»­ä½¿ç”¨è®¡ç®—å€¼ï¼ˆå½“å‰æ–¹å¼ï¼‰

å¦‚æœé€‰æ‹©è¿™ç§æ–¹å¼ï¼Œä»£ç å·²ç»å®ç°ï¼Œæ— éœ€ä¿®æ”¹ã€‚

### é€‰é¡¹Bï¼šä½¿ç”¨CSVä¸­çš„"Fused Travel Time"

éœ€è¦ä¿®æ”¹ `build_finaldata()` å‡½æ•°ï¼Œæ·»åŠ å¯¹ `snapshot_csv_path` çš„æ”¯æŒï¼š

```python
def build_finaldata(
    link_id: int,
    precleaned_path: str,
    snapshot_csv_path: Optional[str] = None,  # æ·»åŠ CSVè·¯å¾„å‚æ•°
    ...
):
    # å¦‚æœæä¾›äº†CSVè·¯å¾„ï¼Œä¼˜å…ˆä½¿ç”¨CSVä¸­çš„Fused Travel Time
    if snapshot_csv_path:
        df_csv = pd.read_csv(snapshot_csv_path)
        # åˆå¹¶Fused Travel Time
        df['fused_tt_15min'] = df_csv['Fused Travel Time'].values
    else:
        # å¦åˆ™ä½¿ç”¨è®¡ç®—å€¼
        df['fused_tt_15min'] = (link_length_km / df['v_avg_kmh']) * 3600
```

---

## ğŸ“‹ å»ºè®®

**æ¨èä½¿ç”¨CSVä¸­çš„"Fused Travel Time"**ï¼Œå› ä¸ºï¼š
1. è¿™æ˜¯å®é™…æµ‹é‡çš„çœŸå®å€¼
2. æ›´ç¬¦åˆ"ground truth"çš„å®šä¹‰
3. å¯èƒ½åŒ…å«è®¡ç®—å€¼æ— æ³•æ•æ‰çš„ç»†èŠ‚

ä½†éœ€è¦ç¡®ä¿ï¼š
- CSVæ–‡ä»¶ä¸Precleanedæ•°æ®çš„æ—¶é—´æˆ³å¯¹é½
- æ•°æ®è´¨é‡æ£€æŸ¥ï¼ˆç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥

å¦‚æœæ‚¨æƒ³ä½¿ç”¨CSVä¸­çš„"Fused Travel Time"ï¼Œæˆ‘å¯ä»¥ï¼š
1. ä¿®æ”¹ `build_finaldata()` å‡½æ•°æ”¯æŒä»CSVè¯»å–
2. æ·»åŠ æ•°æ®å¯¹é½é€»è¾‘
3. æ·»åŠ è´¨é‡æ£€æŸ¥
4. æ›´æ–°æ–‡æ¡£

è¯·å‘Šè¯‰æˆ‘æ‚¨çš„é€‰æ‹©ï¼

